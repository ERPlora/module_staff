{% extends "ui/module_content.html" %}
{% load i18n %}

{% block page_header %}
<ion-toolbar>
    <ion-title>{% trans "Staff Members" %}</ion-title>
    <ion-buttons slot="end">
        <ion-button href="{% url 'staff:staff_create' %}">
            {% icon "add-outline" %}
        </ion-button>
    </ion-buttons>
</ion-toolbar>
{% endblock %}

{% block page_content %}
<div class="list-container">
    <!-- Search and Filters -->
    <ion-searchbar
        placeholder="{% trans 'Search staff...' %}"
        hx-get="{% url 'staff:staff_list' %}"
        hx-trigger="input changed delay:300ms"
        hx-target="#staff-list"
        hx-select="#staff-list"
        name="q"
        value="{{ request.GET.q }}">
    </ion-searchbar>

    <div class="filter-chips">
        <ion-chip
            {% if not request.GET.status %}color="primary"{% endif %}
            onclick="filterByStatus('')">
            {% trans "All" %}
        </ion-chip>
        <ion-chip
            {% if request.GET.status == 'active' %}color="primary"{% endif %}
            onclick="filterByStatus('active')">
            {% trans "Active" %}
        </ion-chip>
        <ion-chip
            {% if request.GET.status == 'on_leave' %}color="primary"{% endif %}
            onclick="filterByStatus('on_leave')">
            {% trans "On Leave" %}
        </ion-chip>
        <ion-chip
            {% if request.GET.status == 'inactive' %}color="primary"{% endif %}
            onclick="filterByStatus('inactive')">
            {% trans "Inactive" %}
        </ion-chip>
    </div>

    <!-- Staff List -->
    <div id="staff-list">
        {% include "staff/partials/staff_list_items.html" %}
    </div>
</div>

<script>
function filterByStatus(status) {
    const url = new URL(window.location.href);
    if (status) {
        url.searchParams.set('status', status);
    } else {
        url.searchParams.delete('status');
    }
    window.location.href = url.toString();
}
</script>

<style>
.filter-chips {
    display: flex;
    gap: 8px;
    padding: 8px 16px;
    overflow-x: auto;
}
</style>
{% endblock %}
